# Command Reference

A concise reference for the `astractl` CLI used to interact with the task scheduler.

Quick links
- [submit](#submit)
- [get](#get)
- [approve](#approve)
- [rollback](#rollback)
- [explain](#explain)

---

## submit
Submits a new intent (task) to the scheduler.

Usage
```bash
astractl submit -f <path> [flags]
```

Required flags
- `-f <string>` — Path to the YAML intent file.

Optional flags
- `--dry-run` — Validate the intent without persisting or executing it.
- `--depends-on <task_id>` — Injects or overwrites a `depends_on` key in the YAML with the given task ID. If a `depends_on:` key exists it is overwritten; otherwise it is appended.

Example
```bash
astractl submit -f ./intents/deploy.yaml --dry-run
```

---

## get
Fetches the current status and execution log of a specific task.

Usage
```bash
astractl get -id <task_id>
```

Flags
- `-id <task_id>` — The ID of the task to fetch.

---

## approve
Approves a task that is waiting in a pending approval or gated state.

Usage
```bash
astractl approve -id <task_id>
```

Flags
- `-id <task_id>` — The ID of the task to approve.

---

## rollback
Triggers a rollback for a specific task ID, reverting it to its initial state.

Usage
```bash
astractl rollback -id <task_id>
```

Flags
- `-id <task_id>` — The ID of the task to roll back.

---

## explain
Provides a Root Cause Analysis (RCA) for a task. Output includes the final state, full audit logs, and any AI semantic analysis (AiInsight) generated by the control plane.

Usage
```bash
astractl explain -id <task_id>
```

Flags
- `-id <task_id>` — The ID of the task to analyze.

---

Notes
- Use `--dry-run` on `submit` to validate changes before applying them.
- `--depends-on` is applied dynamically to the YAML and may overwrite existing `depends_on` entries.