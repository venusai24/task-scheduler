// When creating BoltDB stores, use this pattern:

// import "github.com/hashicorp/raft-boltdb/v2"

// Create the stable store with NoSync option to reduce transaction errors
stableStore, err := raftboltdb.New(raftboltdb.Options{
    Path: filepath.Join(raftDir, "stable.db"),
    BoltOptions: &bolt.Options{
        NoFreelistSync: true,
        FreelistType:   bolt.FreelistMapType,
    },
})
if err != nil {
    return fmt.Errorf("failed to create stable store: %w", err)
}

// Create the log store similarly
logStore, err := raftboltdb.New(raftboltdb.Options{
    Path: filepath.Join(raftDir, "logs.db"),
    BoltOptions: &bolt.Options{
        NoFreelistSync: true,
        FreelistType:   bolt.FreelistMapType,
    },
})
if err != nil {
    return fmt.Errorf("failed to create log store: %w", err)
}
